<section class="z-20 sticky">
  <div class="flex justify-center items-center flex-col">
    <div class="content w-[100%] sm:w-[70%]">
      <h1 class="text-[#D19C97] text-3xl mb-2 font-light text-center">
        Register Now
      </h1>
      <form [formGroup]="register" (ngSubmit)="submitForm()">
        <div class="field mb-6">
          <input type="text" formControlName="name" placeholder="Name" />
        </div>
        @let nameControl=register.get('name'); @if
        (nameControl?.errors&&nameControl?.touched) {
        <div
          class="flex p-2 mt-2 mb-2 rounded text-sm text-white bg-[#D19C97] dark:bg-gray-800 dark:text-blue-400"
          role="alert"
        >
          <svg
            class="shrink-0 inline w-4 h-4 me-2 mt-[2px]"
            aria-hidden="true"
            xmlns="http://www.w3.org/2000/svg"
            fill="currentColor"
            viewBox="0 0 20 20"
          >
            <path
              d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"
            />
          </svg>
          <span class="sr-only">Info</span>
          <div>
            <ul class="mt-1.5 list-disc list-inside">
              @if (nameControl?.getError('required')) {
              <li>Name Is Required</li>
              } @else if (nameControl?.getError('minlength')) {
              <li>Name Should be more than or equal 3 chars</li>
              } @else if (nameControl?.getError('maxlength')) {
              <li>Name Should be less than or equal 20 chars</li>
              }
            </ul>
          </div>
        </div>
        }

        <div class="field mb-6">
          <input type="email" formControlName="email" placeholder="Email" />
        </div>
        @let emailControl=register.get('email'); @if
        (emailControl?.errors&&emailControl?.touched) {
        <div
          class="flex p-2 mt-2 mb-2 rounded text-sm text-white bg-[#D19C97] dark:bg-gray-800 dark:text-blue-400"
          role="alert"
        >
          <svg
            class="shrink-0 inline w-4 h-4 me-2 mt-[2px]"
            aria-hidden="true"
            xmlns="http://www.w3.org/2000/svg"
            fill="currentColor"
            viewBox="0 0 20 20"
          >
            <path
              d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"
            />
          </svg>
          <span class="sr-only">Info</span>
          <div>
            <ul class="mt-1.5 list-disc list-inside">
              @if (emailControl?.getError('required')) {
              <li>Email Is Required</li>
              } @else if (emailControl?.getError('email')) {
              <li>Enter Valid Email</li>
              }
            </ul>
          </div>
        </div>
        }
        <div class="field mb-6">
          <input
            type="password"
            formControlName="password"
            placeholder="Password"
          />
        </div>
        @let passwordControl=register.get('password'); @if
        (passwordControl?.errors&&passwordControl?.touched) {
        <div
          class="flex p-2 mt-2 mb-2 rounded text-sm text-white bg-[#D19C97] dark:bg-gray-800 dark:text-blue-400"
          role="alert"
        >
          <svg
            class="shrink-0 inline w-4 h-4 me-2 mt-[2px]"
            aria-hidden="true"
            xmlns="http://www.w3.org/2000/svg"
            fill="currentColor"
            viewBox="0 0 20 20"
          >
            <path
              d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"
            />
          </svg>
          <span class="sr-only">Info</span>
          <div>
            <ul class="mt-1.5 list-disc list-inside">
              @if (passwordControl?.getError('required')) {
              <li>Password Is Required</li>
              } @else if (passwordControl?.getError('pattern')) {
              <li>
                password must start with upperCase then from 6 to more any chars
              </li>
              }
            </ul>
          </div>
        </div>
        }

        <div class="field mb-6">
          <input
            type="password"
            formControlName="rePassword"
            placeholder="repassword"
          />
        </div>
        @if( register.getError('mismatch')&&register.get('rePassword')?.touched
        ){
        <div
          class="flex p-2 mt-2 mb-2 rounded text-sm text-white bg-[#D19C97] dark:bg-gray-800 dark:text-blue-400"
          role="alert"
        >
          <svg
            class="shrink-0 inline w-4 h-4 me-2 mt-[2px]"
            aria-hidden="true"
            xmlns="http://www.w3.org/2000/svg"
            fill="currentColor"
            viewBox="0 0 20 20"
          >
            <path
              d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"
            />
          </svg>
          <span class="sr-only">Info</span>
          <div>
            <ul class="mt-1.5 list-disc list-inside">
              <li>Password confirmation is incorrect</li>
            </ul>
          </div>
        </div>
        }
        <div class="field mb-6">
          <input type="tel" formControlName="phone" placeholder="Phone" />
        </div>
        @let phoneControl=register.get('phone'); @if
        (phoneControl?.errors&&phoneControl?.touched) {
        <div
          class="flex p-2 mt-2 mb-2 rounded text-sm text-white bg-[#D19C97] dark:bg-gray-800 dark:text-blue-400"
          role="alert"
        >
          <svg
            class="shrink-0 inline w-4 h-4 me-2 mt-[2px]"
            aria-hidden="true"
            xmlns="http://www.w3.org/2000/svg"
            fill="currentColor"
            viewBox="0 0 20 20"
          >
            <path
              d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"
            />
          </svg>
          <span class="sr-only">Info</span>
          <div>
            <ul class="mt-1.5 list-disc list-inside">
              @if (phoneControl?.getError('required')) {
              <li>Phone Is Required</li>
              } @else if (phoneControl?.getError('pattern')) {
              <li>accept only egypt phone numbers..Only 11 number</li>
              }
            </ul>
          </div>
        </div>
        }

        <button class="disabled:bg-gray-600">
          Register @if (isLoading()) {
          <span> <i class="fa-solid fa-spin fa-fan"></i> </span>
          }
        </button>
        @if(isSuccess()){
        <div
          class="flex items-center bg-[#c79794] justify-center p-2 text-sm text-white border border-green-300 rounded-lg dark:bg-gray-800 dark:text-green-400 dark:border-green-800"
          role="alert"
        >
          <span class="sr-only">Info</span>
          <div>
            <span class="text-2xl text-center pe-2"> {{ isSuccess() }}</span>
          </div>
          <i class="fa-solid text-2xl fa-face-smile-wink"></i>
        </div>
        } @if(msgErorr()){
        <div
          class="flex p-2 mt-2 mb-2 rounded text-light text-white bg-[#D19C97] dark:bg-gray-800 dark:text-blue-400"
          role="alert"
        >
          <svg
            class="shrink-0 inline w-4 h-4 me-2 mt-[2px]"
            aria-hidden="true"
            xmlns="http://www.w3.org/2000/svg"
            fill="currentColor"
            viewBox="0 0 20 20"
          >
            <path
              d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"
            />
          </svg>
          <span class="sr-only">Info</span>
          <div>
            <ul class="mt-1.5 list-disc list-inside">
              <li>{{ msgErorr() }}</li>
            </ul>
          </div>
        </div>
        }
      </form>
    </div>
  </div>
</section>
